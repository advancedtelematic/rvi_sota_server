<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width">

        <title>GENIVI SOTA Project : RVI Client Implementation Example Session</title>
        <meta name="description" content="Software Updates Over the Air">

        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="/rvi_sota_server/css/main.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
    </head>
    <body>

        <div class="container-fluid">
            <div class="row">
                <div id="header" class="col-sm-12">
                    <h4><img src="/rvi_sota_server/images/icon-logo.png"> <a class="brand" href="/rvi_sota_server/">GENIVI SOTA Project</a> / 
    Software Updates Over the Air
</h4>

                </div>
            </div>

            <div class="row">
                
                
                    <div id="navigation" class="col-sm-3">
                        <ul class="nav nav-list">
    <li><a href="/rvi_sota_server/">Home</a></li>
    
        
        

        
            
                <li class="nav-header">Getting Started</li>
            
            <li data-order="2"><a href="/rvi_sota_server/doc/deployment-with-dockercompose.html">Deployment with docker-compose</a></li>
        
            
            <li data-order="3"><a href="/rvi_sota_server/doc/admin-gui-user-guide.html">Admin GUI Guide</a></li>
        
            
            <li data-order="1"><a href="/rvi_sota_server/doc/building-installing.html">Building & Deploying</a></li>
        
    
        
        

        
            
                <li class="nav-header">Developers</li>
            
            <li data-order="10"><a href="/rvi_sota_server/dev/generated-documentation.html">Auto-generated Documentation</a></li>
        
            
            <li data-order="4"><a href="/rvi_sota_server/dev/architecture.html">SOTA Architecture</a></li>
        
            
            <li data-order="1"><a href="/rvi_sota_server/dev/contributing.html">Contributing</a></li>
        
            
            <li data-order="6"><a href="/rvi_sota_server/dev/database-style-guide.html">Database Style Guide</a></li>
        
            
            <li data-order="5"><a href="/rvi_sota_server/dev/scala-style-guide.html">Scala Style Guide</a></li>
        
            
            <li data-order="1"><a href="/rvi_sota_server/dev/api.html">API</a></li>
        
    
        
        

        
            
                <li class="nav-header">Client Documentation</li>
            
            <li data-order="2"><a href="/rvi_sota_server/cli/building-the-sota-client.html">Building the SOTA Client</a></li>
        
            
            <li data-order="3"><a href="/rvi_sota_server/cli/client-commands-and-events-reference.html">Client commands and events API reference</a></li>
        
            
            <li data-order="1"><a href="/rvi_sota_server/cli/introduction.html">Introduction</a></li>
        
            
            <li data-order="2"><a href="/rvi_sota_server/cli/client-startup-and-configuration.html">Client Startup and Configuration</a></li>
        
            
            <li data-order="8"><a href="/rvi_sota_server/cli/client-implementation-example-session.html">RVI Client Implementation Example Session</a></li>
        
            
            <li data-order="7"><a href="/rvi_sota_server/cli/client-implementation.html">RVI Client Implementation Reference</a></li>
        
    
        
        

        
            
                <li class="nav-header">Security Approach</li>
            
            <li data-order=""><a href="/rvi_sota_server/sec/security-threats-mitigations.html">Security Threats & Mitigations</a></li>
        
            
            <li data-order=""><a href="/rvi_sota_server/sec/whitelisted-interactions.html">Whitelisted Interactions</a></li>
        
    
        
        

        
            
                <li class="nav-header">Reference</li>
            
            <li data-order=""><a href="/rvi_sota_server/ref/dependencies.html">Dependencies</a></li>
        
            
            <li data-order="5"><a href="/rvi_sota_server/ref/use-cases.html">Use Cases</a></li>
        
            
            <li data-order="4"><a href="/rvi_sota_server/ref/requirements.html">Requirements</a></li>
        
    
<!-- List additional links. It is recommended to add a divider
    e.g. <li class="divider"></li> first to break up the content. -->
</ul>

                    </div>

                    <div id="content" class="col-sm-9">
                        <div id="content" class="col-sm-10">
                            <div class="page-header">
    <h2>RVI Client Implementation Example Session
        
    </h2>
</div>

<div class="paragraph">
<p>This page takes a look at a typical RVI client session, where the client connects to the RVI node, gets notified of an available update, downloads and installs the update, and reports the success back to the server. We&#8217;ll break this down in detail, and look at each of the steps of the process. You can also download <a href="/rvi_sota_server/example-client-session.log">the debug log file from this session</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Registering services</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Client connects to RVI node.</p>
</li>
<li>
<p>RVI node lists the services it has available.</p>
</li>
<li>
<p>Client registers its available services with the RVI node.</p>
</li>
<li>
<p>Client gets the fully qualified names of its services from the node in return.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Package notification and download</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Client receives a notification from the server that a package update is available.</p>
</li>
<li>
<p>Client tells the server it can start sending the package.</p>
</li>
<li>
<p>Server tells the client the package&#8217;s SHA1 checksum, and the total number of 64kb chunks in the package, and the client acknowledges.</p>
</li>
<li>
<p>Server starts sending chunks, and the client acknowledges each one.</p>
</li>
<li>
<p>Once the client has acknowledged all the chunks, the server tells the client the transfer is finished.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Package installation and report</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>The client assembles the chunks, and calls the local software loading manager to install the package.</p>
</li>
<li>
<p>Once the SLM terminates, the client sends a report back to the server with the success or failure of the package install.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="sect1">
<h2 id="1-registering-services">1. Registering Services</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When the client connects to the RVI node, the first thing that needs to happen is an exchange of information about services: the client registers with the RVI node all of the services it implements, and the RVI node tells the client which services it has available. The RVI node also gives the client a unique name for each service it registers.</p>
</div>
<div class="paragraph">
<p>Here is how the RVI node notifies the client about an available service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  <span style="color: #008000; font-weight: bold">&quot;jsonrpc&quot;</span>: <span style="color: #BA2121">&quot;2.0&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;id&quot;</span>: <span style="color: #666666">1</span>,
  <span style="color: #008000; font-weight: bold">&quot;method&quot;</span>: <span style="color: #BA2121">&quot;services_available&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;params&quot;</span>: {
    <span style="color: #008000; font-weight: bold">&quot;services&quot;</span>: [
      <span style="color: #BA2121">&quot;genivi.org/backend/sota/start&quot;</span>
    ]
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Currently, the services the RVI node will make available are <code>genivi.org/backend/sota/start</code>, <code>genivi.org/backend/sota/ack</code>, <code>genivi.org/backend/sota/report</code>, and <code>genivi.org/backend/sota/packages</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Here is how the client registers a service with the RVI node:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  <span style="color: #008000; font-weight: bold">&quot;jsonrpc&quot;</span>: <span style="color: #BA2121">&quot;2.0&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;id&quot;</span>: <span style="color: #666666">2649007917144</span>,
  <span style="color: #008000; font-weight: bold">&quot;method&quot;</span>: <span style="color: #BA2121">&quot;register_service&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;params&quot;</span>: {
    <span style="color: #008000; font-weight: bold">&quot;network_address&quot;</span>: <span style="color: #BA2121">&quot;sota_client_1:8090&quot;</span>, <i class="conum" data-value="1"></i><b>(1)</b>
    <span style="color: #008000; font-weight: bold">&quot;service&quot;</span>: <span style="color: #BA2121">&quot;/sota/notify&quot;</span>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This session was running in docker containers, with <code>sota_client_1</code> as the hostname of the client container. It would be more common to supply an ip address.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The client registers 5 services with RVI: <code>/sota/start</code>, <code>/sota/chunk</code>, <code>/sota/finish</code>, <code>/sota/getpackages</code>, and <code>/sota/abort</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The RVI node responds with a status code and the <em>fully qualified</em> name of the service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  <span style="color: #008000; font-weight: bold">&quot;jsonrpc&quot;</span>: <span style="color: #BA2121">&quot;2.0&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;id&quot;</span>: <span style="color: #666666">2649007917144</span>,
  <span style="color: #008000; font-weight: bold">&quot;result&quot;</span>: {
    <span style="color: #008000; font-weight: bold">&quot;status&quot;</span>: <span style="color: #666666">0</span>,
    <span style="color: #008000; font-weight: bold">&quot;service&quot;</span>: <span style="color: #BA2121">&quot;genivi.org/vin/VINOOLAM0FAU2DEEP/sota/notify&quot;</span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It&#8217;s important for the client to save each service name&#8212;&#8203;it will be sent with future requests.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="2-package-notification-and-download">2. Package notification and download</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When an update is ready to install, the server will send a message to the client&#8217;s <code>/sota/notify</code> service. Let&#8217;s take a look at the message, and explain the elements of it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  <span style="color: #008000; font-weight: bold">&quot;jsonrpc&quot;</span>: <span style="color: #BA2121">&quot;2.0&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;id&quot;</span>: <span style="color: #666666">1</span>,
  <span style="color: #008000; font-weight: bold">&quot;method&quot;</span>: <span style="color: #BA2121">&quot;message&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;params&quot;</span>: {
    <span style="color: #008000; font-weight: bold">&quot;service_name&quot;</span>: <span style="color: #BA2121">&quot;/sota/notify&quot;</span>,
    <span style="color: #008000; font-weight: bold">&quot;parameters&quot;</span>: [ <i class="conum" data-value="1"></i><b>(1)</b>
      {
        <span style="color: #008000; font-weight: bold">&quot;services&quot;</span>: { <i class="conum" data-value="2"></i><b>(2)</b>
          <span style="color: #008000; font-weight: bold">&quot;ack&quot;</span>: <span style="color: #BA2121">&quot;genivi.org/backend/sota/ack&quot;</span>,
          <span style="color: #008000; font-weight: bold">&quot;report&quot;</span>: <span style="color: #BA2121">&quot;genivi.org/backend/sota/report&quot;</span>,
          <span style="color: #008000; font-weight: bold">&quot;start&quot;</span>: <span style="color: #BA2121">&quot;genivi.org/backend/sota/start&quot;</span>,
          <span style="color: #008000; font-weight: bold">&quot;packages&quot;</span>: <span style="color: #BA2121">&quot;genivi.org/backend/sota/packages&quot;</span>
        },
        <span style="color: #008000; font-weight: bold">&quot;packages&quot;</span>: [ <i class="conum" data-value="3"></i><b>(3)</b>
          {
            <span style="color: #008000; font-weight: bold">&quot;size&quot;</span>: <span style="color: #666666">35768</span>,
            <span style="color: #008000; font-weight: bold">&quot;package&quot;</span>: {
              <span style="color: #008000; font-weight: bold">&quot;version&quot;</span>: <span style="color: #BA2121">&quot;7.6.2&quot;</span>,
              <span style="color: #008000; font-weight: bold">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;ghc&quot;</span>
            }
          }
        ]
      }
    ]
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Note that the parameters are wrapped as a single-element array. This is a workaround for a bug in the current version of RVI, and will likely be removed in subsequent releases.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Every <code>/sota/notify</code> message will include a list of fully qualified names of the sender&#8217;s available services.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This is the real content of the notification: the names, versions, and sizes of the packages to be updated.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once the client is ready to receive the package (for example, when the user accepts the update), it sends a message to the RVI node&#8217;s <code>genivi.org/backend/sota/start</code> service.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  <span style="color: #008000; font-weight: bold">&quot;jsonrpc&quot;</span>: <span style="color: #BA2121">&quot;2.0&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;id&quot;</span>: <span style="color: #666666">2677667615071</span>,
  <span style="color: #008000; font-weight: bold">&quot;method&quot;</span>: <span style="color: #BA2121">&quot;message&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;params&quot;</span>: {
    <span style="color: #008000; font-weight: bold">&quot;service_name&quot;</span>: <span style="color: #BA2121">&quot;genivi.org/backend/sota/start&quot;</span>,
    <span style="color: #008000; font-weight: bold">&quot;timeout&quot;</span>: <span style="color: #666666">1445520390</span>,
    <span style="color: #008000; font-weight: bold">&quot;parameters&quot;</span>: [
      {
        <span style="color: #008000; font-weight: bold">&quot;packages&quot;</span>: [ <i class="conum" data-value="1"></i><b>(1)</b>
          {
            <span style="color: #008000; font-weight: bold">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;ghc&quot;</span>,
            <span style="color: #008000; font-weight: bold">&quot;version&quot;</span>: <span style="color: #BA2121">&quot;7.6.2&quot;</span>
          }
        ],
        <span style="color: #008000; font-weight: bold">&quot;services&quot;</span>: { <i class="conum" data-value="2"></i><b>(2)</b>
          <span style="color: #008000; font-weight: bold">&quot;start&quot;</span>: <span style="color: #BA2121">&quot;genivi.org/vin/VINOOLAM0FAU2DEEP/sota/start&quot;</span>,
          <span style="color: #008000; font-weight: bold">&quot;chunk&quot;</span>: <span style="color: #BA2121">&quot;genivi.org/vin/VINOOLAM0FAU2DEEP/sota/chunk&quot;</span>,
          <span style="color: #008000; font-weight: bold">&quot;abort&quot;</span>: <span style="color: #BA2121">&quot;genivi.org/vin/VINOOLAM0FAU2DEEP/sota/abort&quot;</span>,
          <span style="color: #008000; font-weight: bold">&quot;finish&quot;</span>: <span style="color: #BA2121">&quot;genivi.org/vin/VINOOLAM0FAU2DEEP/sota/finish&quot;</span>,
          <span style="color: #008000; font-weight: bold">&quot;getpackages&quot;</span>: <span style="color: #BA2121">&quot;genivi.org/vin/VINOOLAM0FAU2DEEP/sota/getpackages&quot;</span>
        },
        <span style="color: #008000; font-weight: bold">&quot;vin&quot;</span>: <span style="color: #BA2121">&quot;VINOOLAM0FAU2DEEP&quot;</span>
      }
    ]
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A list of the packages the client is ready to accept. This needs to be a subset of the packages that the client has been notified about.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This is an important requirement to remember: Every time a client sends a <code>/sota/start</code> message, it has to include the fully qualified names of all of its services, except for notify. (Notify isn&#8217;t required because <code>start</code> is a response to <code>notify</code>, so the RVI node must already know about it.)</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now, the RVI node sends a message to the client&#8217;s <code>/sota/start</code> service for each package the client has accepted, giving an SHA1 checksum and the number of chunks that will be sent.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  <span style="color: #008000; font-weight: bold">&quot;jsonrpc&quot;</span>: <span style="color: #BA2121">&quot;2.0&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;id&quot;</span>: <span style="color: #666666">1</span>,
  <span style="color: #008000; font-weight: bold">&quot;method&quot;</span>: <span style="color: #BA2121">&quot;message&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;params&quot;</span>: {
    <span style="color: #008000; font-weight: bold">&quot;service_name&quot;</span>: <span style="color: #BA2121">&quot;/sota/start&quot;</span>,
    <span style="color: #008000; font-weight: bold">&quot;parameters&quot;</span>: [
      {
        <span style="color: #008000; font-weight: bold">&quot;chunkscount&quot;</span>: <span style="color: #666666">1</span>, <i class="conum" data-value="1"></i><b>(1)</b>
        <span style="color: #008000; font-weight: bold">&quot;checksum&quot;</span>: <span style="color: #BA2121">&quot;e6db09bd2c84db66534107da4ef00e6addccba8e&quot;</span>, <i class="conum" data-value="2"></i><b>(2)</b>
        <span style="color: #008000; font-weight: bold">&quot;package&quot;</span>: {
          <span style="color: #008000; font-weight: bold">&quot;version&quot;</span>: <span style="color: #BA2121">&quot;7.6.2&quot;</span>,
          <span style="color: #008000; font-weight: bold">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;ghc&quot;</span>
        }
      }
    ]
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The package file will be sent in 64kb chunks; this tells the client how many chunks there are in total.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The SHA1 checksum of the final, reassembled file.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In response, the client must send an ack message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  <span style="color: #008000; font-weight: bold">&quot;jsonrpc&quot;</span>: <span style="color: #BA2121">&quot;2.0&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;id&quot;</span>: <span style="color: #666666">2677989151999</span>,
  <span style="color: #008000; font-weight: bold">&quot;method&quot;</span>: <span style="color: #BA2121">&quot;message&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;params&quot;</span>: {
    <span style="color: #008000; font-weight: bold">&quot;service_name&quot;</span>: <span style="color: #BA2121">&quot;genivi.org/backend/sota/ack&quot;</span>,
    <span style="color: #008000; font-weight: bold">&quot;timeout&quot;</span>: <span style="color: #666666">1445520390</span>, <i class="conum" data-value="1"></i><b>(1)</b>
    <span style="color: #008000; font-weight: bold">&quot;parameters&quot;</span>: [
      {
        <span style="color: #008000; font-weight: bold">&quot;package&quot;</span>: {
          <span style="color: #008000; font-weight: bold">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;ghc&quot;</span>,
          <span style="color: #008000; font-weight: bold">&quot;version&quot;</span>: <span style="color: #BA2121">&quot;7.6.2&quot;</span>
        },
        <span style="color: #008000; font-weight: bold">&quot;chunks&quot;</span>: [], <i class="conum" data-value="2"></i><b>(2)</b>
        <span style="color: #008000; font-weight: bold">&quot;vin&quot;</span>: <span style="color: #BA2121">&quot;VINOOLAM0FAU2DEEP&quot;</span>
      }
    ]
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The timeout is given as a Unix epoch time.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This is an array with the list of all the chunks the client already has.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once the server receives the ack, it will start sending chunks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  <span style="color: #008000; font-weight: bold">&quot;jsonrpc&quot;</span>: <span style="color: #BA2121">&quot;2.0&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;id&quot;</span>: <span style="color: #666666">1</span>,
  <span style="color: #008000; font-weight: bold">&quot;method&quot;</span>: <span style="color: #BA2121">&quot;message&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;params&quot;</span>: {
    <span style="color: #008000; font-weight: bold">&quot;service_name&quot;</span>: <span style="color: #BA2121">&quot;/sota/chunk&quot;</span>,
    <span style="color: #008000; font-weight: bold">&quot;parameters&quot;</span>: [
      {
        <span style="color: #008000; font-weight: bold">&quot;index&quot;</span>: <span style="color: #666666">1</span>,
        <span style="color: #008000; font-weight: bold">&quot;bytes&quot;</span>: <span style="color: #BA2121">&quot;7avu2wMAA&lt;rest of base64 encoded data chunk omitted&gt;AAAKWVo=&quot;</span>,
        <span style="color: #008000; font-weight: bold">&quot;package&quot;</span>: {
          <span style="color: #008000; font-weight: bold">&quot;version&quot;</span>: <span style="color: #BA2121">&quot;7.6.2&quot;</span>,
          <span style="color: #008000; font-weight: bold">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;ghc&quot;</span>
        }
      }
    ]
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The client sends back an ack each time it receives a chunk; the format is the same as above. Once the server has received an ack for every chunk, it will send a finish message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  <span style="color: #008000; font-weight: bold">&quot;jsonrpc&quot;</span>: <span style="color: #BA2121">&quot;2.0&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;id&quot;</span>: <span style="color: #666666">1</span>,
  <span style="color: #008000; font-weight: bold">&quot;method&quot;</span>: <span style="color: #BA2121">&quot;message&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;params&quot;</span>: {
    <span style="color: #008000; font-weight: bold">&quot;service_name&quot;</span>: <span style="color: #BA2121">&quot;/sota/finish&quot;</span>,
    <span style="color: #008000; font-weight: bold">&quot;parameters&quot;</span>: [
      {
        <span style="color: #008000; font-weight: bold">&quot;package&quot;</span>: {
          <span style="color: #008000; font-weight: bold">&quot;version&quot;</span>: <span style="color: #BA2121">&quot;7.6.2&quot;</span>,
          <span style="color: #008000; font-weight: bold">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;ghc&quot;</span>
        }
      }
    ]
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="3-package-installation-and-report">3. Package installation and report</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that the client has received all the chunks, it needs to reassemble them into the binary file, and install the package using the system&#8217;s software loading manager. Once it gets the results of the install, it sends a report message back to the server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  <span style="color: #008000; font-weight: bold">&quot;jsonrpc&quot;</span>: <span style="color: #BA2121">&quot;2.0&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;id&quot;</span>: <span style="color: #666666">2680479224662</span>,
  <span style="color: #008000; font-weight: bold">&quot;method&quot;</span>: <span style="color: #BA2121">&quot;message&quot;</span>,
  <span style="color: #008000; font-weight: bold">&quot;params&quot;</span>: {
    <span style="color: #008000; font-weight: bold">&quot;service_name&quot;</span>: <span style="color: #BA2121">&quot;genivi.org/backend/sota/report&quot;</span>,
    <span style="color: #008000; font-weight: bold">&quot;timeout&quot;</span>: <span style="color: #666666">1445520392</span>,
    <span style="color: #008000; font-weight: bold">&quot;parameters&quot;</span>: [
      {
        <span style="color: #008000; font-weight: bold">&quot;package&quot;</span>: {
          <span style="color: #008000; font-weight: bold">&quot;name&quot;</span>: <span style="color: #BA2121">&quot;ghc&quot;</span>,
          <span style="color: #008000; font-weight: bold">&quot;version&quot;</span>: <span style="color: #BA2121">&quot;7.6.2&quot;</span>
        },
        <span style="color: #008000; font-weight: bold">&quot;status&quot;</span>: <span style="color: #008000; font-weight: bold">true</span>, <i class="conum" data-value="1"></i><b>(1)</b>
        <span style="color: #008000; font-weight: bold">&quot;description&quot;</span>: <span style="color: #BA2121">&quot;Successfully installed package&quot;</span>, <i class="conum" data-value="2"></i><b>(2)</b>
        <span style="color: #008000; font-weight: bold">&quot;vin&quot;</span>: <span style="color: #BA2121">&quot;VINOOLAM0FAU2DEEP&quot;</span>
      }
    ]
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A boolean. True for success, false for anything else.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A descriptive status message. Most probably, it&#8217;s easiest to pass the software loading manager&#8217;s status message on directly.</td>
</tr>
</table>
</div>
</div>
</div>

                        </div>
                    </div>
                
            </div>

            

            <div class="row">
                <div id="footer" class="col-sm-12">
                    Documentation for <a href="https://github.com/genivi/rvi_sota_server">GENIVI SOTA Project</a>

                </div>
            </div>
        </div>

        <script>
            function orderNav() {
                var list,
                    section,
                    header,
                    sections = [],
                    lists = {},
                    headers = {};

                var navUl = document.querySelectorAll('#navigation ul')[0],
                    navLis = document.querySelectorAll('#navigation ul li');

                if (!navUl) return;

                for (var i = 0; i < navLis.length; i++) {
                    var order, li = navLis[i];

                    if (li.classList.contains('nav-header')) {
                        section = li.textContent || li.innerText;
                        sections.push(section);
                        headers[section] = li;
                        continue;
                    }

                    if (!lists[section]) {
                        lists[section] = [];
                    }

                    order = parseFloat(li.getAttribute('data-order'))
                    lists[section].push([order, li]);
                }

                for (var i = 0; i < sections.length; i++) {
                    section = sections[i];
                    list = lists[section].sort(function(a, b) {
                        return a[0] - b[0];
                    });

                    if (header = headers[section]) {
                        navUl.appendChild(header);
                    }
                    for (var j = 0; j < list.length; j++) {
                        navUl.appendChild(list[j][1]);
                    }
                }
            }

            if (document.querySelectorAll) orderNav();
        </script>
        
        <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-69301419-1', 'auto');
  ga('send', 'pageview');
</script>

        
    </body>
</html>
